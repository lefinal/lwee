"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6448],{5536:(n,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var e=i(5893),o=i(1151);const a={sidebar_position:50},s="Action I/O",c={id:"action-io",title:"Action I/O",description:"Action IO is the way of transmitting data between actions.",source:"@site/docs/action-io.mdx",sourceDirName:".",slug:"/action-io",permalink:"/lwee/action-io",draft:!1,unlisted:!1,editUrl:"https://github.com/lefinal/lwee/docs/docs/action-io.mdx",tags:[],version:"current",sidebarPosition:50,frontMatter:{sidebar_position:50},sidebar:"tutorialSidebar",previous:{title:"Project Action",permalink:"/lwee/actions/project-action"},next:{title:"Flow Inputs",permalink:"/lwee/category/flow-inputs"}},r={},l=[{value:"Definition of inputs and outputs",id:"definition-of-inputs-and-outputs",level:2},{value:"Data transmission",id:"data-transmission",level:2},{value:"Optimizations",id:"optimizations",level:2}];function u(n){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.h1,{id:"action-io",children:"Action I/O"}),"\n",(0,e.jsx)(t.p,{children:"Action IO is the way of transmitting data between actions.\nIn most cases, you will also use some data to start with and ingest it into the flow at the beginning.\nIn the end, you will extract some generated artifact data from the flow.\nThis is possible by defining inputs and outputs on the flow and its actions.\nActions will not be scheduled until all of its inputs are available."}),"\n",(0,e.jsx)(t.mermaid,{value:'flowchart TD;\n    subgraph flow.in["`**Flow Inputs**`"]\n        flow.in.a["A"]\n        flow.in.b["B"]\n    end\n\n    subgraph action.1["Action 1"]\n        action.1.in.a["`_In: A_`"]\n        action.1.run["`Operation`"]\n        action.1.out.a["`_Out: A_`"]\n        action.1.out.b["`_Out: B_`"]\n    end\n\n    subgraph action.2["Action 2"]\n        action.2.in.a["`_In: A_`"]\n        action.2.in.b["`_In: B_`"]\n        action.2.run["`Operation`"]\n        action.2.out.a["`_Out: A_`"]\n        action.2.out.b["`_Out: B_`"]\n    end\n\n    subgraph action.3["Action 3"]\n        action.3.in.a["`_In: A_`"]\n        action.3.in.b["`_In: B_`"]\n        action.3.in.c["`_In: C_`"]\n        action.3.run["`Operation`"]\n        action.3.out.a["`_Out: A_`"]\n    end\n\n    subgraph flow.out["`**Flow Outputs**`"]\n        flow.out.a["A"]\n        flow.out.b["B"]\n        flow.out.c["C"]\n    end\n\n    action.1.in.a --\x3e action.1.run\n    action.1.run --\x3e action.1.out.a\n    action.1.run --\x3e action.1.out.b\n\n    action.2.in.a --\x3e action.2.run\n    action.2.in.b --\x3e action.2.run\n    action.2.run --\x3e action.2.out.a\n    action.2.run --\x3e action.2.out.b\n    action.2.out.b --\x3e flow.out.c\n\n    action.3.in.a --\x3e action.3.run\n    action.3.in.b --\x3e action.3.run\n    action.3.in.c --\x3e action.3.run\n    action.3.run --\x3e action.3.out.a\n\n    %% Data flow.\n    flow.in.a --\x3e action.1.in.a\n    flow.in.a --\x3e action.2.in.a\n    flow.in.b --\x3e action.2.in.b\n    action.1.out.a --\x3e flow.out.a\n    action.1.out.a --\x3e action.3.in.a\n    action.1.out.b --\x3e action.3.in.b\n    action.2.out.b --\x3e action.3.in.c\n    action.3.out.a --\x3e flow.out.b'}),"\n",(0,e.jsx)(t.h2,{id:"definition-of-inputs-and-outputs",children:"Definition of inputs and outputs"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:["Each input ",(0,e.jsx)(t.strong,{children:"requests"})," data from an entity."]}),"\n",(0,e.jsxs)(t.li,{children:["Each output ",(0,e.jsx)(t.strong,{children:"provides"})," data from an entity."]}),"\n"]}),"\n",(0,e.jsx)(t.p,{children:"For actions, this is simple:"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"An input requests data from somewhere and provides it to the operation."}),"\n",(0,e.jsx)(t.li,{children:"An output provides data from the operation to others."}),"\n"]}),"\n",(0,e.jsx)(t.p,{children:"Regarding flow inputs/outputs, you need to think about the naming in reverse."}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"A flow input provides data from the host machine to others - like an output."}),"\n",(0,e.jsx)(t.li,{children:"A flow output requests data from somewhere and provides it to the host machine - like an input."}),"\n"]}),"\n",(0,e.jsx)(t.p,{children:"How does this look in practice?\nHere is an input definition."}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-yaml",children:"# Source of the data.\nsource: action.maxTemperature.out.max\n# How data is provided to the action/host.\nprovideAs: stdin\n"})}),"\n",(0,e.jsxs)(t.p,{children:["Each input requires a ",(0,e.jsx)(t.strong,{children:"source"}),".\nSyntax:"]}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.code,{children:"flow.in.<input_name>"}),": Request a flow input."]}),"\n",(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.code,{children:"action.<action_name>.out.<output_name>"}),": Request an action's output."]}),"\n"]}),"\n",(0,e.jsxs)(t.p,{children:["It then provides the data to the operation/host with a specific method.\nMethods may also depend on the operation.\nFor example, the action input type ",(0,e.jsx)(t.a,{href:"/lwee/action-inputs/workspace-file",children:"workspace file"})," cannot be used with the ",(0,e.jsx)(t.a,{href:"/lwee/actions/command-action",children:"command action type"}),"."]}),"\n",(0,e.jsx)(t.p,{children:"Outputs are declared like this:"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-yaml",children:"# How data is available in the action/host.\nprovidedAs: stdout\n"})}),"\n",(0,e.jsx)(t.p,{children:"For a list of available input/output types, see the sections about flow/action inputs/outputs."}),"\n",(0,e.jsx)(t.h2,{id:"data-transmission",children:"Data transmission"}),"\n",(0,e.jsx)(t.p,{children:"LWEE manages data transmission in Action IO.\nData is transmitted in raw form and not encoded in any way.\nBecause of async IO, (de)multiplexing and some applications calling write many times, LWEE does not directly copy incoming data.\nInstead, it buffers it and then sends it to the receivers.\nBuffer swapping is applied here as well so that the writing application can continue to write data while LWEE forwards the previous batch to receivers."}),"\n",(0,e.jsx)(t.h2,{id:"optimizations",children:"Optimizations"}),"\n",(0,e.jsx)(t.p,{children:"LWEE has support for providing optimizations for certain combinations of input/output types."}),"\n",(0,e.jsxs)(t.p,{children:["Currently, an optimization is being applied if source data is provided as ",(0,e.jsx)(t.a,{href:"/lwee/action-inputs/workspace-file",children:"workspace file"})," and requested like this as well.\nIf there is only one request for the file, it will be moved instead of being copied.\nThis is especially useful for large files."]})]})}function d(n={}){const{wrapper:t}={...(0,o.a)(),...n.components};return t?(0,e.jsx)(t,{...n,children:(0,e.jsx)(u,{...n})}):u(n)}},1151:(n,t,i)=>{i.d(t,{Z:()=>c,a:()=>s});var e=i(7294);const o={},a=e.createContext(o);function s(n){const t=e.useContext(a);return e.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),e.createElement(a.Provider,{value:t},n.children)}}}]);