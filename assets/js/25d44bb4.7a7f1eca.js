"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4266],{7563:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var i=t(5893),o=t(1151);const r={},a="Project Action",c={id:"actions/project-action",title:"Project Action",description:"Project actions describe container images that are being built from sources in the project.",source:"@site/docs/actions/project-action.mdx",sourceDirName:"actions",slug:"/actions/project-action",permalink:"/lwee/actions/project-action",draft:!1,unlisted:!1,editUrl:"https://github.com/lefinal/lwee/docs/docs/actions/project-action.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Image Action",permalink:"/lwee/actions/image-action"},next:{title:"Action I/O",permalink:"/lwee/action-io"}},s={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Templating",id:"templating",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"project-action",children:"Project Action"}),"\n",(0,i.jsx)(n.p,{children:"Project actions describe container images that are being built from sources in the project.\nThis is the preferred way of using operations as each image can easily be reproduced with the available source code.\nYou can also inspect the code directly as it lies in the project's directory."}),"\n",(0,i.jsxs)(n.p,{children:["In LWEE project actions are stored in the ",(0,i.jsx)(n.em,{children:"/actions"})," directory.\nYou can easily create one using:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"lwee create-action\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"/lwee/usage",children:"Usage section"})," for more details."]}),"\n",(0,i.jsxs)(n.p,{children:["Each project action consists of an ",(0,i.jsx)(n.em,{children:"action.yaml"})," file that currently holds a list of configurations.\nThis is meant for future features where different run configurations might be stored in a centralized manner.\nAdditionally, there is the ",(0,i.jsx)(n.em,{children:"Dockerfile"})," which is used to build the image.\nHave a look at the official ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/builder/",children:"Dockerfile reference"})," for more information on that topic."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Always pin your image versions to avoid unwanted changes due to image updates."})}),"\n",(0,i.jsx)(n.p,{children:"When a workflow should be executed with LWEE, it will build all project actions on startup, prior to starting the actions."}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'type: proj-action\n# Identifier of the project action.\n# This is the name you specified at creation and is also the directory name.\nname: "to-uppercase"\n# Config to use. Defaults to "default". Reserved for future use.\nconfig: "default"\n# Overwrite the configured command in the image.\ncommand:\n  - "my-command"\n  - "with"\n  - "arguments"\n# Environment variables for the container in key-value pairs.\nenv:\n  key1: "value1"\n  key2: "value2"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"templating",children:"Templating"}),"\n",(0,i.jsx)(n.p,{children:"Additional available fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".Action.Extras.WorkspaceHostDir"}),": Temporary directory on the host that is mounted to the container."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".Action.Extras.WorkspaceMountDir"}),": Directory in the container where the workspace from the host is mounted.\nUsually, this is at ",(0,i.jsx)(n.em,{children:"/lwee"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>a});var i=t(7294);const o={},r=i.createContext(o);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);